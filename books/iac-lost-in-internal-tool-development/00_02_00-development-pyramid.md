---
title: "ツール開発のレイヤー分け"
---

## ピラミッド構造

IaC の立ち位置を説明するにあたり、簡単に以下のようなピラミッド構造を考えます。

<!-- [![Image from Gyazo](https://i.gyazo.com/3d6d51a7a8444305bfe629440894ba49.png)](https://gyazo.com/3d6d51a7a8444305bfe629440894ba49) -->

[![Image from Gyazo](https://i.gyazo.com/eb0d470e9aa96257da943403067059cd.png)](https://gyazo.com/eb0d470e9aa96257da943403067059cd)

1. 利用側 (利用者・ユーザー)
   - 内製ツールの場合は基本的に「課題・要望」が先に存在し、それを解決するツールを提供する目的で開発がスタートします。
2. ツール開発 (アプリケーションコード)
   - 利用者がどんな課題を抱えており、どこに効率化のポイントがあるのかを見極め、解決するツールを提供します。
   - 一度作り終えただけで終わりでなく、メトリクスやフィードバックを通して改善を続ける必要があります。
3. 環境構築とデプロイ
   - 開発したツールを動かす環境を整備します。
   - 主にサーバーの内部構成を指すことにします。
   - ※ IaC 周りの話は基本的にこのレイヤになります。
4. ハードウェア (VM を含む[^VMも含む])
   - デプロイを行うサーバーを確保します。
   - OS やマシンスペックの他、ネットワーク環境やディスクのパーティション、ファイルシステムの設定なども含めます。

[^VMも含む]: 今回は 「OS を積んだマシンを提供すること」とし、物理マシンだけでけでなく仮想マシン (VM) として提供することもこのレイヤに含めます。

この図では下層で起こる「品質の低さ」[^品質の低さ]がより上層において大きな反動となって影響を与えること[^ブルウィップ]を表現しました。

[^品質の低さ]: 品質の低さ ... ここでの品質は「とりあえず正常に動いている」というだけではなく、変更容易性 (Modifiability)、運用性 (Operability)、使いやすさ (Usability) 等もをちゃんと上の階層に向けて提供できているかも含むものとします。
[^ブルウィップ]: ブルウィップ効果 ... 鞭効果。地震の際にマンションの下の階より上の階のほうがよく揺れるような様子を想像してほしいです。

ここで **一つ注意すべきこと** はこの構造は決して部署や組織で分かれているわけではありません。 単に利用側からの要望に応えるツールを動かすにはこれらの要素が **必ず存在** し、かつそれぞれが **下のレイヤに依存** しているということです[^CLIツールは除く]。

[^CLIツールは除く]: 必ずと表現しましたが開発者のローカルで閉じている CLI ツール等はこのケースに該当しませんが簡単のため除外しています。

そのため、何も土壌がない状態で一人で開発を任されたときは、これらを全て一人で担うことになるでしょう。ただ、最近は多少コストはかかるかもしれませんが IaaS を使えば「ハードウェア調達・整備」の部分は丸ごと省略でき、PaaS を使えば追加で「環境構築とデプロイ」の **大半[^環境構築とデプロイの大半] を肩代わり** してもらえることでしょう。

[^環境構築とデプロイの大半]: 「環境構築とデプロイ」の大半 ... ここで大半と表現したのは筆者がこのレイヤーの作業は決してゼロになり得ないと考えるからです (必ず必要な作業をこのレイヤーに分類しているとも言える)。

また「利用側」というレイヤーについてですが、ここはエンジニア自身でもよく、何かしらのツール開発や運用の最中、効率化のために別のピラミッド (要求) を形成することでしょう。

[![Image from Gyazo](https://i.gyazo.com/c567bb2328a986f1a36d32f34cc27410.png)](https://gyazo.com/c567bb2328a986f1a36d32f34cc27410)

以降このイメージをベースに説明していきます。
