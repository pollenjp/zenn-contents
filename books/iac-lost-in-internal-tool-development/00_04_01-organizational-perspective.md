---
title: "組織の中でのIaCポジション"
---

## IaC 管理を組織として取り入れる際の注意点と意義

まず IaC 管理を正しく行うにはそのレイヤーのついての **正しい知識と矯正力を持ったエンジニア** がリードする必要があります。
なぜなら、その上では数多のアプリを動かしながらも 「ツール開発」側と「デプロイ」側で**責任を分離した状態を保つ**必要があるからです。
具体的には

- 勝手なファイルの書き換えや構成変更を防ぐため、マシン上に SSH することを禁止したり
- 定期的にデプロイマシンを切り替えて、再構築性 (Reconstructability) の保証をしたり
- 全てを自動化し、その上でアプリケーションが存在していてもほとんど変わらない運用コストを維持したり
- 実際にアプリケーション側のコードもレビューし気付いた点指摘したり

することで秩序の乱れを防ぎます。メンバーに臆することなく指摘やアドバイスを投げる必要があるので、正しい IaC の知識以外にも根気やリーダーっぽい動きを求められるかもしれません。

## 逆ピラミッドから見える重要性

このポジションの重要性は以下のような図にするとわかりやすいです。 本書序盤で提示したピラミッド図に対応させて、「関わる人や影響を受ける人数」を視覚化したものになります。

[![Image from Gyazo](https://i.gyazo.com/d72da2644de7e8f20a8155a0c7828e54.png)](https://gyazo.com/d72da2644de7e8f20a8155a0c7828e54)

今は内製ツールに言及しているのでこれらは全て組織の人ですが、各レイヤの作業効率を上げることで得られる恩恵は**上層の更に多くの人の効率化を加速**させます。 つまり「環境構築とデプロイ」レイヤの効率化 (IaC 化) はこの図の登場人物全員に恩恵をもたらします。

また、「ツール開発」レイヤが「デプロイ側」から分離されているため、ツール側のコードは**より閉じた範囲のスコープ**で開発できるようになります。 結果、ヘルプ[^help_support]や引き継ぎ時の学習コストを減らし、複数の人でタスクを回しすくなります (**属人性の抑制**)[^scope]。

[^help_support]: 内製ツール周りでは手が空いた人や気付いた人が改修を入れることも少なくなく、コードの理解しやすさやとっつきやすさは非常に重要です。
[^scope]: もちろんアプリケーションコードの中のことはそのツールの設計次第ではありますが、少なくともデプロイ環境のノイズは入りこませることはありません。 また、分離性を高める工夫や行動は他のメンバーにとってのお手本となり、良い意味で組織に伝搬していくでしょう。

[![Image from Gyazo](https://i.gyazo.com/7fd8ea22c95bf2aa8327062aad4b7d0d.png)](https://gyazo.com/7fd8ea22c95bf2aa8327062aad4b7d0d)

この統率に失敗する、あるいは IaC 化をせずに回し始めると、各ツールは特定のデプロイ環境下に依存し始めます。すると徐々にツール側のコードの深いところまで侵食されていき、 再構築性 (Reconstructability) や テスト容易性 (Testability) は消え失せた無惨な塊と成り果てるでしょう。

特に一人で担当を任せられていたツールなどは誰かのレビューを受ける隙が無く、**メンテナビリティの低いコード・構成を自分の運用で賄う (隠う)** 動きに発展するのも珍しくありません。 誰かがヘルプで入ったり引き継いだりする必要が生じたときに初めて露呈するものです。

これを是正するには一からコードを書き直すほどの勢いと工数が必要ですが、引き継ぎが発生するケースを考えるとそんな余裕などないのでしょう。 **重い引き継ぎコストと工数の食う運用コスト** を渋々引き受けざるを得ないのです。

[![Image from Gyazo](https://i.gyazo.com/7aa34263eb44f3caf6ff6f8f4328c544.png)](https://gyazo.com/7aa34263eb44f3caf6ff6f8f4328c544)

## 責任は分離するが、一緒に開発している

編集中

<!-- 他の人に影響をもたせるということは組織における停滞を見つけ出すうえでも有効です。 -->

<!-- [![Image from Gyazo](https://i.gyazo.com/88857d28cd8b87ccab2048148646c833.png)](https://gyazo.com/88857d28cd8b87ccab2048148646c833) -->

<!-- その中で、例えば The Twelve-Factor App の[「III. Config」](https://12factor.net/config)違反のようなものを見つけたら、適切なコミュニケーションの元でアプリ開発者に良いコードへの理解を深めていってもらうのが理想でしょう。 -->

<!-- [^teaching]: 属人性の観点から、IaC 側にデプロイを組み込んだ際のコード差分はツール開発者と一緒に確認し、壁を感じさせない知識共有ができるとよいでしょう。 -->

<!-- これらを怠れば、限られたの数のエンジニアの中で作り出すツールの数はスケールせず、運用コストばかり膨らんでいきます。 -->
